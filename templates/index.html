<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‚ù§Ô∏è Heart Disease Predictor</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
</head>

<body>
  <div class="app-container">
    <header>
      <h1>üíô Heart Disease Prediction Dashboard</h1>
      <p>Enter patient details, select one or more models, and compare their results instantly.</p>
    </header>

    <!-- üåà TWO-COLUMN LAYOUT -->
    <form method="POST" action="/predict">
      <div class="main-grid">

        <!-- üë©‚Äç‚öïÔ∏è Patient Info (Left) -->
        <div class="input-card">
          <h2>üë©‚Äç‚öïÔ∏è Patient Information</h2>
          <div class="form-grid">
            <div class="form-row"><label>Age</label><input type="number" name="feature1" placeholder="e.g. 52" required></div>
            <div class="form-row"><label>Sex (1=Male, 0=Female)</label><input type="number" name="feature2" placeholder="e.g. 1" required></div>
            <div class="form-row"><label>Chest Pain Type (0‚Äì3)</label><input type="number" name="feature3" placeholder="e.g. 0" required></div>
            <div class="form-row"><label>Resting BP (mm Hg)</label><input type="number" name="feature4" placeholder="e.g. 125" required></div>
            <div class="form-row"><label>Cholesterol (mg/dl)</label><input type="number" name="feature5" placeholder="e.g. 212" required></div>
            <div class="form-row"><label>Fasting Blood Sugar (>120 mg/dl: 1/0)</label><input type="number" name="feature6" placeholder="e.g. 0" required></div>
            <div class="form-row"><label>Resting ECG (0‚Äì2)</label><input type="number" name="feature7" placeholder="e.g. 1" required></div>
            <div class="form-row"><label>Max Heart Rate</label><input type="number" name="feature8" placeholder="e.g. 168" required></div>
            <div class="form-row"><label>Exercise Induced Angina (1/0)</label><input type="number" name="feature9" placeholder="e.g. 0" required></div>
            <div class="form-row"><label>Oldpeak (ST Depression)</label><input type="number" step="0.1" name="feature10" placeholder="e.g. 1.0" required></div>
            <div class="form-row"><label>Slope (0‚Äì2)</label><input type="number" name="feature11" placeholder="e.g. 2" required></div>
            <div class="form-row"><label>Major Vessels (0‚Äì3)</label><input type="number" name="feature12" placeholder="e.g. 0" required></div>
            <div class="form-row"><label>Thal (1=Normal, 2=Fixed, 3=Reversible)</label><input type="number" name="feature13" placeholder="e.g. 3" required></div>
          </div>
        </div>

        <!-- ‚öôÔ∏è Right Column -->
        <div class="right-column">

<!-- ‚öôÔ∏è Model Selection (Scrollable Checkbox Section) -->
<div class="model-card">
  <h2>‚öôÔ∏è Select Models</h2>
  <p class="note">‚úÖ Choose one or more algorithms to compare</p>

  <!-- Scrollable container for checkboxes -->
  <div class="checkbox-scroll">
    <div class="checkbox-grid">
      {% for m in models %}
      <label class="checkbox-item">
        <input type="checkbox" name="model" value="{{ m }}">
        {{ m }}
      </label>
      {% endfor %}
    </div>
  </div>

  <button type="submit" class="predict-btn">üîç Predict</button>
</div>


          <!-- ‚úÖ Prediction Summary -->
          {% if results %}
            {% for r in results %}
            <div class="summary-card">
              <h2>‚úÖ {{ r.model }}</h2>
              <p><strong>Prediction:</strong>
                {% if r.prediction == 1 %}
                  <span class="bad">‚ö†Ô∏è Heart Disease Detected</span>
                {% elif r.prediction == 0 %}
                  <span class="good">üíö No Heart Disease</span>
                {% endif %}
              </p>
              <p><strong>Accuracy:</strong> {{ r.accuracy }}%</p>

              <!-- üìä Classification Report -->
              <div class="report-card">
                <h3>üìä Classification Report</h3>
                <table>
                  <tr>
                    <th>Label</th>
                    <th>Precision</th>
                    <th>Recall</th>
                    <th>F1-Score</th>
                  </tr>
                  {% for label, metrics in r.report.items() %}
                    {% if metrics is mapping %}
                    <tr>
                      <td>{{ label }}</td>
                      <td>{{ "%.2f"|format(metrics['precision']) }}</td>
                      <td>{{ "%.2f"|format(metrics['recall']) }}</td>
                      <td>{{ "%.2f"|format(metrics['f1-score']) }}</td>
                    </tr>
                    {% endif %}
                  {% endfor %}
                </table>
              </div>
            </div>
            {% endfor %}
          {% else %}
            <div class="summary-card">
              <p>No prediction yet. Please enter details and select one or more models.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </form>
  </div>
</body>
</html>
